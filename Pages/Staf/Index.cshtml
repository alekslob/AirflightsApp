@page


@model Airflights.Pages.Staf.IndexModel

<div style="display: ruby-text;">
    <h1>Рейсы</h1>
    <a href="/Routes" class="header-link">Маршруты</a>
    <a href="/Aircrafts" class="header-link">Самолеты</a>
</div>
<span>@Model.Message</span>
<div>
<form method="get">
    <span>Пункт назначения</span>
    <select type="text" name="citieskey" value="@Model.CitiesKey">
        @foreach(var item in Model.Cities){
            <option value="@item.Key">@item.Value</option>
        }
    </select>
    <button type="submit" class="btn btn-danger">Применить</button>
</form>
</div>
<table class="table">
    <thead>
        <tr>
            <th>№ Рейса</th>
            <th>Статус</th>
            <th>Самолет</th>
            <th>Пункт назначения</th>
            <th>Время вылета</th>
            <th>Время прибытия</th>
            <th>Количество свободных мест</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @if (Model.Items != null && Model.Items.Any()){
            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>@item.Number</td>
                    <td>@item.Status</td>
                    <td>@item.AircraftName</td>
                    <td>@item.DepartureAirportCode</td>
                    <td>@item.DepartureTime</td>
                    <td>@item.ArrivalTime</td>
                    <td>@item.AvailableSeats</td>
                    <td>
                        <a href="/staf/flight/@item.Id" class="btn btn-sm btn-info">Details</a>
                    </td>
                </tr>
                
            }
        }
    </tbody>
</table>

<div class="mt-3">
    <a href="/swagger" class="btn btn-secondary">API Documentation</a>
    @* <button onclick="refreshData()" class="btn btn-primary">Refresh</button> *@
    <form method="post" style="display: inline;">
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-danger">Выйти</button>
    </form>
</div>

@section Scripts {
    <script>
        function refreshData() {
            location.reload();
        }
    </script>
}
